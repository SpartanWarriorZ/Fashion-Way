<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fashion-Way | Modern Fashion Shop</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <!-- Locomotive Scroll CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
  <!-- Locomotive Scroll JS -->
  <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>
</head>
<body data-scroll-container>
  <header class="hero" data-scroll-section>
    <div class="hero-bg" data-scroll></div>
    <nav class="navbar sticky" data-scroll>
      <div class="logo">FASHION<span class="minus">-</span>WAY</div>
      <button class="burger" id="burgerMenu" aria-label="Menü öffnen" style="display:none;">
        &#9776;
      </button>
      <ul class="nav-links">
        <li><a href="#shop" data-scroll-to>Shop</a></li>
        <li><a href="#lookbook" data-scroll-to>Lookbook</a></li>
        <li><a href="#kontakt" data-scroll-to>Kontakt</a></li>
      </ul>
      <nav class="mobile-nav" id="mobileNav">
        <button class="close-btn" id="closeMobileNav" aria-label="Menü schließen">&times;</button>
        <ul>
          <li><a href="#shop" data-scroll-to>Shop</a></li>
          <li><a href="#lookbook" data-scroll-to>Lookbook</a></li>
          <li><a href="#kontakt" data-scroll-to>Kontakt</a></li>
        </ul>
      </nav>
    </nav>
    <div class="hero-content" data-scroll data-scroll-speed="1.5">
      <h1 class="hero-title">
        <span class="highlight">FASHION</span> <span class="redefined">WAY</span>
      </h1>
      <p class="hero-subtitle">Dein Weg zu exklusiven Styles, Trends und Inspiration.<br>Erlebe Fashion neu gedacht.</p>
      <a href="#shop" class="cta-btn" data-scroll-to>Jetzt shoppen</a>
    </div>
  </header>

  <main data-scroll-section style="margin-top:2.5rem;">
    <section class="products" id="shop">
      <div class="shop-main">
        <!-- Sidebar/Kategorien werden auf Mobil über dem Shop angezeigt -->
        <aside class="shop-sidebar">
          <nav class="shop-nav">
            <ul class="main-cat-list">
              <li><button class="main-cat-btn active" data-maincat="herren">Herren</button></li>
              <li><button class="main-cat-btn" data-maincat="damen">Damen</button></li>
              <li><button class="main-cat-btn" data-maincat="kinder">Kinder</button></li>
            </ul>
            <ul class="sub-cat-list">
              <li><button class="sub-cat-btn active" data-subcat="alle">Alle</button></li>
              <li><button class="sub-cat-btn" data-subcat="oberteile">Oberteile</button></li>
              <li><button class="sub-cat-btn" data-subcat="hosen">Hosen</button></li>
              <li><button class="sub-cat-btn" data-subcat="schuhe">Schuhe</button></li>
              <li><button class="sub-cat-btn" data-subcat="accessoires">Accessoires</button></li>
            </ul>
          </nav>
        </aside>
        <div class="shop-products">
          <h2 class="section-title" data-scroll data-scroll-speed="1" style="text-align:left;margin-left:0;margin-top:0.5rem;margin-bottom:1.2rem;">Shop</h2>
          <div class="shop-grid" id="shopGrid">
            <!-- Die Produkte werden jetzt dynamisch per JS eingefügt -->
          </div>
        </div>
      </div>
    </section>

    <section class="lookbook" id="lookbook" data-scroll-section>
      <!-- Inhalt entfernt -->
    </section>

    <section class="contact" id="kontakt" data-scroll-section>
      <!-- Inhalt entfernt -->
    </section>
  </main>

  <footer data-scroll-section>
    <div class="footer-content">
      <div class="footer-logo">FASHION<span class="minus">-</span>WAY</div>
      <ul class="footer-links">
        <li><a href="#shop" data-scroll-to>Shop</a></li>
        <li><a href="#lookbook" data-scroll-to>Lookbook</a></li>
        <li><a href="#kontakt" data-scroll-to>Kontakt</a></li>
      </ul>
      <div class="footer-social">
        <a href="#" aria-label="Instagram"><svg width="24" height="24" fill="currentColor"><use href="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/instagram.svg#icon"></use></svg></a>
        <a href="#" aria-label="Facebook"><svg width="24" height="24" fill="currentColor"><use href="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/facebook.svg#icon"></use></svg></a>
        <a href="#" aria-label="TikTok"><svg width="24" height="24" fill="currentColor"><use href="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/tiktok.svg#icon"></use></svg></a>
      </div>
      <p style="margin-top:1.5rem;">&copy; 2025 FASHION-WAY. All rights reserved.</p>
    </div>
  </footer>
  
  <script src="assets/js/main.js"></script>
  <script>
    // Locomotive Scroll + GSAP ScrollTrigger Integration
    const scroll = new LocomotiveScroll({
      el: document.querySelector('[data-scroll-container]'),
      smooth: true,
      lerp: 0.08,
      multiplier: 1,
      class: 'is-inview'
    });

    scroll.on("scroll", ScrollTrigger.update);

    ScrollTrigger.scrollerProxy("[data-scroll-container]", {
      scrollTop(value) {
        return arguments.length ? scroll.scrollTo(value, 0, 0) : scroll.scroll.instance.scroll.y;
      },
      getBoundingClientRect() {
        return {top: 0, left: 0, width: window.innerWidth, height: window.innerHeight};
      },
      pinType: document.querySelector("[data-scroll-container]").style.transform ? "transform" : "fixed"
    });

    ScrollTrigger.addEventListener("refresh", () => scroll.update());
    ScrollTrigger.refresh();

    // Nach jedem Resize Locomotive Scroll & ScrollTrigger updaten
    window.addEventListener('resize', () => {
      if (window.scroll && window.scroll.update) scroll.update();
      if (window.ScrollTrigger && window.ScrollTrigger.refresh) ScrollTrigger.refresh();
    });

    // Nach jedem Laden Locomotive Scroll & ScrollTrigger updaten
    window.addEventListener('load', () => {
      if (window.scroll && window.scroll.update) scroll.update();
      if (window.ScrollTrigger && window.ScrollTrigger.refresh) ScrollTrigger.refresh();
    });

    // ScrollTo-Fix für Locomotive Scroll bei Anker-Links
    document.querySelectorAll('[data-scroll-to]').forEach(link => {
      link.addEventListener('click', function(e) {
        const targetId = this.getAttribute('href');
        if (targetId && targetId.startsWith('#')) {
          e.preventDefault();
          const target = document.querySelector(targetId);
          if (target) {
            scroll.scrollTo(target, { offset: 0, duration: 800, disableLerp: false });
          }
          if (targetId === '#shop' && window.innerWidth <= 900) {
            scroll.scrollTo(target, { offset: -100, duration: 800, disableLerp: false });
          }
        }
      });
    });

    // GSAP Animationen
    gsap.from(".hero-title .highlight", {
      y: 80, opacity: 0, duration: 1.2, ease: "power4.out",
      scrollTrigger: {
        trigger: ".hero-title .highlight",
        scroller: "[data-scroll-container]",
        start: "top 80%"
      }
    });
    gsap.from(".hero-title .redefined", {
      y: 80, opacity: 0, duration: 1.2, delay: 0.2, ease: "power4.out",
      scrollTrigger: {
        trigger: ".hero-title .redefined",
        scroller: "[data-scroll-container]",
        start: "top 80%"
      }
    });
    gsap.from(".hero-subtitle, .cta-btn", {
      y: 40, opacity: 0, duration: 1, delay: 0.5, stagger: 0.2, ease: "power2.out",
      scrollTrigger: {
        trigger: ".hero-subtitle",
        scroller: "[data-scroll-container]",
        start: "top 90%"
      }
    });
    gsap.utils.toArray(".product-card").forEach((card, i) => {
      gsap.from(card, {
        scrollTrigger: {
          trigger: card,
          scroller: "[data-scroll-container]",
          start: "top 80%",
        },
        y: 60,
        opacity: 0,
        duration: 1,
        delay: i * 0.15,
        ease: "power3.out"
      });
    });

    // Produktdaten für jede Kategorie
    const universalImg = "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=600&q=80";
    const products = {
      herren: [
        {
          name: "Herren Shirt 1",
          desc: "Modernes Herren T-Shirt in Grau.",
          price: "29,99 €",
          img: universalImg,
          subcat: "oberteile"
        },
        {
          name: "Herren Shirt 2",
          desc: "Basic T-Shirt mit Rundhalsausschnitt.",
          price: "19,99 €",
          img: universalImg,
          subcat: "oberteile"
        },
        {
          name: "Herren Hose 1",
          desc: "Bequeme Jeans für jeden Tag.",
          price: "49,99 €",
          img: universalImg,
          subcat: "hosen"
        },
        {
          name: "Herren Sneaker 1",
          desc: "Weiße Sneaker für den Alltag.",
          price: "59,99 €",
          img: universalImg,
          subcat: "schuhe"
        },
        {
          name: "Herren Cap 1",
          desc: "Stylische Cap für Herren.",
          price: "14,99 €",
          img: universalImg,
          subcat: "accessoires"
        }
      ],
      damen: [
        {
          name: "Damen Bluse 1",
          desc: "Leichte Sommerbluse in Weiß.",
          price: "34,99 €",
          img: universalImg,
          subcat: "oberteile"
        },
        {
          name: "Damen Hose 1",
          desc: "Elegante Stoffhose für Damen.",
          price: "44,99 €",
          img: universalImg,
          subcat: "hosen"
        },
        {
          name: "Damen Sneaker 1",
          desc: "Trendige Sneaker für Damen.",
          price: "69,99 €",
          img: universalImg,
          subcat: "schuhe"
        },
        {
          name: "Damen Tasche 1",
          desc: "Modische Handtasche.",
          price: "24,99 €",
          img: universalImg,
          subcat: "accessoires"
        }
      ],
      kinder: [
        {
          name: "Kinder Shirt 1",
          desc: "Buntes Kinder T-Shirt.",
          price: "14,99 €",
          img: universalImg,
          subcat: "oberteile"
        },
        {
          name: "Kinder Hose 1",
          desc: "Bequeme Kinderhose.",
          price: "19,99 €",
          img: universalImg,
          subcat: "hosen"
        },
        {
          name: "Kinder Sneaker 1",
          desc: "Coole Sneaker für Kids.",
          price: "29,99 €",
          img: universalImg,
          subcat: "schuhe"
        },
        {
          name: "Kinder Cap 1",
          desc: "Cooles Accessoire für Kids.",
          price: "9,99 €",
          img: universalImg,
          subcat: "accessoires"
        }
      ]
    };

    // Anzahl Produkte pro Kategorie
    const PRODUCTS_PER_CATEGORY = 12;

    function animateProductCards() {
      const cards = document.querySelectorAll('.product-card');
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
              obs.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });
        cards.forEach(card => {
          card.classList.remove('visible');
          observer.observe(card);
        });
      } else {
        cards.forEach(card => card.classList.add('visible'));
      }
    }

    function renderProducts(maincat, subcat) {
      const grid = document.getElementById('shopGrid');
      grid.innerHTML = '';
      let list = products[maincat] || [];
      while (list.length < PRODUCTS_PER_CATEGORY) {
        list = list.concat(list);
      }
      let filtered = (subcat === 'alle')
        ? list.slice(0, PRODUCTS_PER_CATEGORY)
        : list.filter(p => p.subcat === subcat).slice(0, PRODUCTS_PER_CATEGORY);

      filtered.forEach(p => {
        const el = document.createElement('div');
        el.className = 'product-card';
        el.setAttribute('data-maincat', maincat);
        el.setAttribute('data-subcat', p.subcat);
        el.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="product-content">
            <h3>${p.name}</h3>
            <p>${p.desc}</p>
            <span class="price">${p.price}</span>
            <button class="buy-btn">In den Warenkorb</button>
          </div>
        `;
        grid.appendChild(el);
      });
      animateProductCards();
    }

    document.addEventListener('DOMContentLoaded', function () {
      const mainBtns = document.querySelectorAll('.main-cat-btn');
      const subBtns = document.querySelectorAll('.sub-cat-btn');
      let selectedMain = 'herren';
      let selectedSub = 'alle';

      function filterProducts() {
        renderProducts(selectedMain, selectedSub);
        if (window.ScrollTrigger && window.ScrollTrigger.refresh) ScrollTrigger.refresh();
      }

      mainBtns.forEach(btn => {
        btn.addEventListener('click', function () {
          mainBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          selectedMain = btn.getAttribute('data-maincat');
          subBtns.forEach(b => b.classList.remove('active'));
          const alleBtn = document.querySelector('.sub-cat-btn[data-subcat="alle"]');
          if (alleBtn) {
            alleBtn.classList.add('active');
            selectedSub = 'alle';
          }
          filterProducts();
          document.body.style.overflow = '';
        });
      });
      
      subBtns.forEach(btn => {
        btn.addEventListener('click', function () {
          subBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          selectedSub = btn.getAttribute('data-subcat');
          filterProducts();
          document.body.style.overflow = '';
        });
      });

      // Initial-Filter
      filterProducts();
    });

    // Hamburger Menü für Mobil
    document.addEventListener('DOMContentLoaded', function () {
      const burger = document.getElementById('burgerMenu');
      const mobileNav = document.getElementById('mobileNav');
      const closeBtn = document.getElementById('closeMobileNav');
      
      function toggleBurgerDisplay() {
        if (window.innerWidth <= 900) {
          burger.style.display = 'flex';
        } else {
          burger.style.display = 'none';
          mobileNav.classList.remove('active');
          burger.classList.remove('active');
          document.body.style.overflow = '';
        }
      }
      
      toggleBurgerDisplay();
      window.addEventListener('resize', toggleBurgerDisplay);

      burger.addEventListener('click', function () {
        mobileNav.classList.add('active');
        burger.classList.add('active');
        document.body.style.overflow = 'hidden';
        setTimeout(() => {
          const firstLink = mobileNav.querySelector('a');
          if (firstLink) firstLink.focus();
        }, 200);
      });
      
      closeBtn.addEventListener('click', function () {
        mobileNav.classList.remove('active');
        burger.classList.remove('active');
        document.body.style.overflow = '';
      });
      
      // Schließe Menü bei Klick auf Link
      mobileNav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', function () {
          mobileNav.classList.remove('active');
          burger.classList.remove('active');
          document.body.style.overflow = '';
        });
      });
      
      // Schließe Menü bei Klick außerhalb des Menüs
      document.addEventListener('click', function (e) {
        if (
          mobileNav.classList.contains('active') &&
          !mobileNav.contains(e.target) &&
          e.target !== burger
        ) {
          mobileNav.classList.remove('active');
          burger.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
      
      // ESC schließt das Menü
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
          mobileNav.classList.remove('active');
          burger.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    });
  </script>
</body>
</html>
